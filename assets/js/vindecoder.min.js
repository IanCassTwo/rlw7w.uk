function vindecoder(){var e;vin=document.getElementById("vin").value,vin=vin.trim().toUpperCase(),vin=vin.replaceAll("/",""),vin=vin.replaceAll("\\",""),vin=vin.replaceAll("-",""),vin=vin.replaceAll(" ",""),oldstyle_short=/^GH[ND][345]\d+G?/,oldstyle=/^GH[ND][345][ULR][A-L\s]?\d+/,v8=/^GD2D[12]\d+/,aus=/^YG?HN\d+G?/,e=vin.match(oldstyle_short)?old_vin_short_decode(vin):vin.match(oldstyle)?old_vin_decode(vin):vin.match(aus)?aus_vin_decode(vin):vin.match(v8)?v8_vin_decode(vin):14==vin.length?new_vin_decode(vin):"This doesn't look like an MGB VIN number to me",document.getElementById("demo").innerHTML=e}function aus_vin_decode(e){var n,a,t,r=e;return console.log(e),n=(r=(r=r.replace("YGHN","")).replace("YHN","")).split(""),a=r.substring(1),t=e+" is an Australian ","3"==n[0]?t+="1963-68 Mk1 Roadster with manual 4-speed transmission manufactured at Pressed Metal Corporation, Enfield.":"4"==n[0]?t+="1968 Mk2 Roadster with manual 4-speed overdrive transmission manufactured at BMC Australia's Zetland plant.":"5"==n[0]?t+="1968-69 Mk2 Roadster with manual 4-speed overdrive transmission manufactured at BMC Australia's Zetland plant.":"6"==n[0]?t+="1969-71 Mk2 Roadster with manual 4-speed transmission manufactured at BMC Australia's Zetland plant.":"7"==n[0]?t+="1969-1970 Mk2 Roadster with automatic transmission manufactured at BMC Australia's Zetland plant.":"9"==n[0]?t+="1970-72 facelift('MGBL') Roadster manufactured at BMC Australia's Zetland plant.":"1"==n[0]&&"0"==n[1]&&(t+="1971-72 facelift('MGBL') Roadster whith automatic transmission manufactured at BMC Australia's Zetland plant.",a=r.substring(2)),t+=" Its serial number is "+a}function old_vin_short_decode(e){var n,a,t,r;if(n=e.split(""),a="roadster",t=e+" is a ","G"!=n[0]||"H"!=n[1])return"Unknown model. The first 2 characters should be 'GH' if this is an MGB";if("3"==n[3])t+="1962-67 Mk1 ";else if("4"==n[3])t+="1968 or 1969 Mk2 ";else{if("5"!=n[3])return"Unknown body. The third character should be one of ND";t+="Mk3 "}if("N"==n[2])t+="MGB Roadster. ";else{if("D"!=n[2])return"Unknown body. The third character should be one of ND";t+="MGB GT. ",a="gt"}return t+="Its serial number is "+(r=(r=e.substring(4)).replace("G","")),t+=getManufactureDate(a,r)}function v8_vin_decode(e){var n,a,t;return n=e.split(""),a=e+" is a",t=(t=e.substring(5)).replace("G",""),(t=parseInt(t))>=95&&t<=2903?(a+=t<2100?" chrome bumper":" rubber bumper",a+=" factory produced MGB GT V8"):t>=3e3&&t<=3999?a+=" registered conversion MGB GT V8":t>=4e3&&t<=4999?a+=" registered conversion MGB Roadster V8":t>=5e3&&t<=5999?a+=" registered Costello MGB GT V8":t>=6e3&&t<=6999&&(a+=" registered Costello MGB Roadster V8"),"1"==n[4]?a+=" first series.":a+=" second series.",a+=" Its serial number is "+t}function old_vin_decode(e){var n,a,t,r;if(n=e.split(""),a="roadster",t=e+" is a ","G"!=n[0]||"H"!=n[1])return"Unknown model. The first 2 characters should be 'GH' if this is an MGB";if("5"==n[3]){if("A"==n[5])t+="1969 or 1970 ";else if("B"==n[5])t+="1971 ";else if("C"==n[5])t+="1972 ";else if("D"==n[5])t+="1973 ";else if("E"==n[5])t+="1974 ";else if("F"==n[5])t+="1975 ";else if("G"==n[5])t+="1976 ";else if("H"==n[5])t+="1977 ";else if("J"==n[5])t+="1978 ";else{if("L"!=n[5])return"Unknown year. The first sixth character should be 'ABCDEFGHGJL' for a Mk3 MGB";t+="1979 "}t+=" model "}if("3"==n[3])t+="1962-67 Mk1 ";else if("4"==n[3])t+="1968 or 1969 Mk2 ";else{if("5"!=n[3])return"Unknown body. The third character should be one of ND";t+="Mk3 "}if("U"==n[4])t+="USA Spec ";else if("L"==n[4])t+="left hand drive ";else{if("R"!=n[4])return"Unknown market. The fifth character should be one of ULR";t+="right hand drive "}if("N"==n[2])t+="MGB Roadster. ";else{if("D"!=n[2])return"Unknown body. The third character should be one of ND";t+="MGB GT. ",a="gt"}return t+="Its serial number is "+(r=(r="5"!=n[3]?e.substring(5):e.substring(6)).replace("G","")),t+=getManufactureDate(a,r)}function new_vin_decode(e){var n,a,t;if(n=e.split(""),a="roadster",t=e+" is a ","G"!=n[0]||"V"!=n[1])return"Unknown model. The first 2 characters should be 'GV' if this is an MGB";if("A"==n[2])t+="right hand drive Roadster ";else if("G"==n[2])t+="right hand drive GT ",a="gt";else if("J"==n[2])t+="Japanese specification Roadster ";else if("L"==n[2])t+="Canadian specification Roadster ";else if("V"==n[2])t+="North American specification Roadster ";else{if("Z"!=n[2])return"Unknown specification. Third character should be one of AGJLVZ";t+="Californian specification Roadster "}return"D"!=n[3]&&"E"!=n[3]?"Unknown body style. Fourth character should be one of DE":"J"!=n[4]?"Unknown engine size. Fifth character should be one of J":(t+="with an 1800cc 4 cylinder B series engine ","1"!=n[5]&&"2"!=n[5]?"Unknown steering and transmission. Sixth character should be one of 12":(t+="and a 4 speed manual gearbox. ","A"!=n[6]?"Unknown model year. Seventh character should be one of A":(t+="It is a 1980 model ","G"!=n[7]?"Unknown assembly plant. Eighth character should be one of G":(t+="made at Abingdon, UK. ",t+="Its serial number is "+e.substring(8),t+=getManufactureDate(a,e.substring(8))))))}function getManufactureDate(e,n){return"gt"==e?getManufactureDateGT(parseInt(n)):getManufactureDateRoadster(parseInt(n))}function getManufactureDateGT(e){var n,a;n="end of production",a={71933:"Sep 65",77774:"Jan 66",113658:"Jan 67",137795:"Oct 67",139471:"Nov 67",139800:"Jan 68",158231:"Nov 68",165382:"Jan 69",187841:"Sep 69",195915:"Jan 70",217910:"Aug 70",219002:"Aug 70",233466:"Jan 71",256646:"Aug 71",258004:"Aug 71",269271:"Jan 72",294250:"Aug 72",296001:"Aug 72",310578:"Jan 73",327990:"Aug 73",328801:"Aug 73",338535:"Jan 74",360069:"Sep 74",361001:"Sep 74",367818:"Dec 74",368601:"Dec 74",369069:"Jan 75",380574:"Aug 75",391501:"Nov 75",394663:"Jan 76",406357:"Jun 76",410351:"Jun 76",422728:"Jan 77",445979:"Sep 77",447036:"Sep 77",455283:"Jan 78",469149:"Jun 78",471036:"Jun 78",483820:"Jan 79",497613:"Jun 79",501036:"Jun 79",508070:"Jan 80",523002:"Oct 80"};for(var t=Object.keys(a).sort(function(e,n){return n-e}),r=0;r<t.length;r++){var i,s=t[r];if(i=a[s],s<e)return" and was manufactured sometime between "+i+" and "+n;n=i}return"."}function getManufactureDateRoadster(e){var n,a;n="end of production",a={101:"May 62",4619:"Jan 63",27927:"Jan 64",54469:"Jan 65",79362:"Jan 66",111418:"Jan 67",138360:"Oct 67",138401:"Nov 67",138961:"Jan 68",158371:"Sep 68",165721:"Jan 69",187170:"Oct 69",196222:"Jan 70",218651:"Aug 70",219001:"Aug 70",232725:"Jan 71",254942:"Aug 71",258001:"Aug 71",268645:"Jan 72",293525:"Aug 72",294251:"Aug 72",307716:"Jan 73",327741:"Aug 73",328101:"Aug 73",338744:"Jan 74",359169:"Sep 74",360301:"Sep 74",367647:"Dec 74",367901:"Dec 74",368082:"Jan 75",386267:"Aug 75",386601:"Aug 75",393834:"Jan 76",409401:"Jun 76",410001:"Jun 76",424714:"Jan 77",444499:"Sep 77",447001:"Sep 77",455670:"Jan 78",468880:"Jun 78",471001:"May 78",485110:"Jan 79",500904:"Dec 79",501001:"Jun 79",507309:"Jan 80",523001:"Oct 80"};for(var t=Object.keys(a).sort(function(e,n){return n-e}),r=0;r<t.length;r++){var i,s=t[r];if(i=a[s],s<e)return" and was manufactured sometime between "+i+" and "+n;n=i}return"."}String.prototype.replaceAll||(String.prototype.replaceAll=function(e,n){let a,t,r="";for(;~(t=this.indexOf(e,a));)r+=this.substring(a,t)+n,a=t+e.length;return r+this.substring(a)});
